{"ast":null,"code":"import _taggedTemplateLiteral from\"C:/Users/jinmin00/OneDrive/\\uBC14\\uD0D5 \\uD654\\uBA74/\\uCF54\\uB529 \\uACF5\\uBD80/front-end/react/Crypto_tracker/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9;import{useQuery}from\"react-query\";import{Helmet}from\"react-helmet\";import{Link,Outlet,useLocation,useMatch,useParams}from\"react-router-dom\";import styled from\"styled-components\";import{fetchCoinInfo,fetchCoinTickers}from\"../api\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  padding: 0px 20px;\\n  max-width: 480px;\\n  margin: 0 auto;\\n\"])));var Header=styled.header(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  height: 10vh;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n\"])));var Overview=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: space-between;\\n  background-color: rgba(0, 0, 0, 0.5);\\n  padding: 10px 20px;\\n  border-radius: 10px;\\n\"])));var OverviewItem=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  span:first-child {\\n    font-size: 10px;\\n    font-weight: 400;\\n    text-transform: uppercase;\\n    margin-bottom: 5px;\\n  }\\n\"])));var Description=styled.p(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  margin: 20px 0px;\\n\"])));var Tabs=styled.div(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  display: grid;\\n  grid-template-columns: repeat(2, 1fr);\\n  margin: 25px 0px;\\n  gap: 10px;\\n\"])));var Tab=styled.span(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n  text-align: center;\\n  text-transform: uppercase;\\n  font-size: 12px;\\n  font-weight: 400;\\n  background-color: rgba(0, 0, 0, 0.5);\\n  padding: 7px 0px;\\n  border-radius: 10px;\\n  color: \",\";\\n  a {\\n    display: block;\\n  }\\n\"])),function(props){return props.isActive?props.theme.accentColor:props.theme.textColor;});var Title=styled.h1(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\n  font-size: 48px;\\n  color: \",\";\\n\"])),function(props){return props.theme.accentColor;});var Loader=styled.span(_templateObject9||(_templateObject9=_taggedTemplateLiteral([\"\\n  text-align: center;\\n  display: block;\\n\"])));function Coin(){var _useParams=useParams(),coinId=_useParams.coinId;var _ref=useLocation(),state=_ref.state;var priceMatch=useMatch(\"/:coinId/price\");var chartMatch=useMatch(\"/:coinId/chart\");var _useQuery=useQuery([\"info\",coinId],function(){return fetchCoinInfo(coinId);}),infoLoading=_useQuery.isLoading,infoData=_useQuery.data;var _useQuery2=useQuery([\"tickers\",coinId],function(){return fetchCoinTickers(coinId);},{refetchInterval:5000}),tickersLoading=_useQuery2.isLoading,tickersData=_useQuery2.data;/* const [loading, setLoading] = useState(true);\r\n  const [info, setInfo] = useState<InfoData>();\r\n  const [priceInfo, setPriceInfo] = useState<PriceData>();\r\n  useEffect(() => {\r\n    (async () => {\r\n      const infoData = await (\r\n        await fetch(`https://api.coinpaprika.com/v1/coins/${coinId}`)\r\n      ).json();\r\n      const priceData = await (\r\n        await fetch(`https://api.coinpaprika.com/v1/tickers/${coinId}`)\r\n      ).json();\r\n      setInfo(infoData);\r\n      setPriceInfo(priceData);\r\n      setLoading(false);\r\n    })();\r\n  }, [coinId]); */var loading=infoLoading||tickersLoading;return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:state!==null&&state!==void 0&&state.name?state.name:loading?\"Loading...\":infoData===null||infoData===void 0?void 0:infoData.name})}),/*#__PURE__*/_jsx(Header,{children:/*#__PURE__*/_jsx(Title,{children:state!==null&&state!==void 0&&state.name?state.name:loading?\"Loading...\":infoData===null||infoData===void 0?void 0:infoData.name})}),loading?/*#__PURE__*/_jsx(Loader,{children:\"Loading...\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Overview,{children:[/*#__PURE__*/_jsxs(OverviewItem,{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Rank:\"}),/*#__PURE__*/_jsx(\"span\",{children:infoData===null||infoData===void 0?void 0:infoData.rank})]}),/*#__PURE__*/_jsxs(OverviewItem,{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Symbol:\"}),/*#__PURE__*/_jsx(\"span\",{children:infoData===null||infoData===void 0?void 0:infoData.symbol})]}),/*#__PURE__*/_jsxs(OverviewItem,{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Price:\"}),/*#__PURE__*/_jsx(\"span\",{children:tickersData===null||tickersData===void 0?void 0:tickersData.quotes.USD.price})]})]}),/*#__PURE__*/_jsx(Description,{children:infoData===null||infoData===void 0?void 0:infoData.description}),/*#__PURE__*/_jsxs(Overview,{children:[/*#__PURE__*/_jsxs(OverviewItem,{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total Suply:\"}),/*#__PURE__*/_jsx(\"span\",{children:tickersData===null||tickersData===void 0?void 0:tickersData.total_supply})]}),/*#__PURE__*/_jsxs(OverviewItem,{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Max Supply:\"}),/*#__PURE__*/_jsx(\"span\",{children:tickersData===null||tickersData===void 0?void 0:tickersData.max_supply})]})]}),/*#__PURE__*/_jsxs(Tabs,{children:[/*#__PURE__*/_jsx(Tab,{isActive:chartMatch!==null,children:/*#__PURE__*/_jsx(Link,{to:\"/\".concat(coinId,\"/chart\"),children:\"Chart\"})}),/*#__PURE__*/_jsx(Tab,{isActive:priceMatch!==null,children:/*#__PURE__*/_jsx(Link,{to:\"/\".concat(coinId,\"/price\"),children:\"Price\"})})]}),/*#__PURE__*/_jsx(Outlet,{context:{coinId:coinId}})]})]});}export default Coin;","map":{"version":3,"names":["useQuery","Helmet","Link","Outlet","useLocation","useMatch","useParams","styled","fetchCoinInfo","fetchCoinTickers","Container","div","Header","header","Overview","OverviewItem","Description","p","Tabs","Tab","span","props","isActive","theme","accentColor","textColor","Title","h1","Loader","Coin","coinId","state","priceMatch","chartMatch","infoLoading","isLoading","infoData","data","refetchInterval","tickersLoading","tickersData","loading","name","rank","symbol","quotes","USD","price","description","total_supply","max_supply"],"sources":["C:/Users/jinmin00/OneDrive/바탕 화면/코딩 공부/front-end/react/Crypto_tracker/src/routes/Coin.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { useQuery } from \"react-query\";\r\nimport { Helmet } from \"react-helmet\";\r\nimport {\r\n  Link,\r\n  Outlet,\r\n  useLocation,\r\n  useMatch,\r\n  useParams,\r\n} from \"react-router-dom\";\r\nimport styled from \"styled-components\";\r\nimport { fetchCoinInfo, fetchCoinTickers } from \"../api\";\r\n\r\nconst Container = styled.div`\r\n  padding: 0px 20px;\r\n  max-width: 480px;\r\n  margin: 0 auto;\r\n`;\r\n\r\nconst Header = styled.header`\r\n  height: 10vh;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\nconst Overview = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  padding: 10px 20px;\r\n  border-radius: 10px;\r\n`;\r\nconst OverviewItem = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  span:first-child {\r\n    font-size: 10px;\r\n    font-weight: 400;\r\n    text-transform: uppercase;\r\n    margin-bottom: 5px;\r\n  }\r\n`;\r\nconst Description = styled.p`\r\n  margin: 20px 0px;\r\n`;\r\nconst Tabs = styled.div`\r\n  display: grid;\r\n  grid-template-columns: repeat(2, 1fr);\r\n  margin: 25px 0px;\r\n  gap: 10px;\r\n`;\r\nconst Tab = styled.span<{ isActive: boolean }>`\r\n  text-align: center;\r\n  text-transform: uppercase;\r\n  font-size: 12px;\r\n  font-weight: 400;\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  padding: 7px 0px;\r\n  border-radius: 10px;\r\n  color: ${(props) =>\r\n    props.isActive ? props.theme.accentColor : props.theme.textColor};\r\n  a {\r\n    display: block;\r\n  }\r\n`;\r\nconst Title = styled.h1`\r\n  font-size: 48px;\r\n  color: ${(props) => props.theme.accentColor};\r\n`;\r\nconst Loader = styled.span`\r\n  text-align: center;\r\n  display: block;\r\n`;\r\n\r\ninterface RouteParams {\r\n  coinId: string;\r\n}\r\ninterface RouteState {\r\n  state: {\r\n    name: string;\r\n  };\r\n}\r\n\r\ninterface InfoData {\r\n  id: string;\r\n  name: string;\r\n  symbol: string;\r\n  rank: number;\r\n  is_new: boolean;\r\n  is_active: boolean;\r\n  type: string;\r\n  description: string;\r\n  message: string;\r\n  open_source: boolean;\r\n  started_at: string;\r\n  development_status: string;\r\n  hardware_wallet: boolean;\r\n  proof_type: string;\r\n  org_structure: string;\r\n  hash_algorithm: string;\r\n  first_data_at: string;\r\n  last_data_at: string;\r\n}\r\n\r\ninterface PriceData {\r\n  id: string;\r\n  name: string;\r\n  symbol: string;\r\n  rank: number;\r\n  circulating_supply: number;\r\n  total_supply: number;\r\n  max_supply: number;\r\n  beta_value: number;\r\n  first_data_at: string;\r\n  last_updated: string;\r\n  quotes: {\r\n    USD: {\r\n      ath_date: \"2021-11-10T16:51:15Z\";\r\n      ath_price: number;\r\n      market_cap: number;\r\n      market_cap_change_24h: number;\r\n      percent_change_1h: number;\r\n      percent_change_1y: number;\r\n      percent_change_6h: number;\r\n      percent_change_7d: number;\r\n      percent_change_12h: number;\r\n      percent_change_15m: number;\r\n      percent_change_24h: number;\r\n      percent_change_30d: number;\r\n      percent_change_30m: number;\r\n      percent_from_price_ath: number;\r\n      price: number;\r\n      volume_24h: number;\r\n      volume_24h_change_24h: number;\r\n    };\r\n  };\r\n}\r\nfunction Coin() {\r\n  const { coinId } = useParams<{ coinId: string }>();\r\n  const { state } = useLocation() as RouteState;\r\n  const priceMatch = useMatch(\"/:coinId/price\");\r\n  const chartMatch = useMatch(\"/:coinId/chart\");\r\n  const { isLoading: infoLoading, data: infoData } = useQuery<InfoData>(\r\n    [\"info\", coinId],\r\n    () => fetchCoinInfo(coinId)\r\n  );\r\n  const { isLoading: tickersLoading, data: tickersData } = useQuery<PriceData>(\r\n    [\"tickers\", coinId],\r\n    () => fetchCoinTickers(coinId),\r\n    {\r\n      refetchInterval: 5000,\r\n    }\r\n  );\r\n  /* const [loading, setLoading] = useState(true);\r\n  const [info, setInfo] = useState<InfoData>();\r\n  const [priceInfo, setPriceInfo] = useState<PriceData>();\r\n  useEffect(() => {\r\n    (async () => {\r\n      const infoData = await (\r\n        await fetch(`https://api.coinpaprika.com/v1/coins/${coinId}`)\r\n      ).json();\r\n      const priceData = await (\r\n        await fetch(`https://api.coinpaprika.com/v1/tickers/${coinId}`)\r\n      ).json();\r\n      setInfo(infoData);\r\n      setPriceInfo(priceData);\r\n      setLoading(false);\r\n    })();\r\n  }, [coinId]); */\r\n  const loading = infoLoading || tickersLoading;\r\n  return (\r\n    <Container>\r\n      <Helmet>\r\n        <title>\r\n          {state?.name ? state.name : loading ? \"Loading...\" : infoData?.name}\r\n        </title>\r\n      </Helmet>\r\n      <Header>\r\n        <Title>\r\n          {state?.name ? state.name : loading ? \"Loading...\" : infoData?.name}\r\n        </Title>\r\n      </Header>\r\n      {loading ? (\r\n        <Loader>Loading...</Loader>\r\n      ) : (\r\n        <>\r\n          <Overview>\r\n            <OverviewItem>\r\n              <span>Rank:</span>\r\n              <span>{infoData?.rank}</span>\r\n            </OverviewItem>\r\n            <OverviewItem>\r\n              <span>Symbol:</span>\r\n              <span>{infoData?.symbol}</span>\r\n            </OverviewItem>\r\n            <OverviewItem>\r\n              <span>Price:</span>\r\n              <span>{tickersData?.quotes.USD.price}</span>\r\n            </OverviewItem>\r\n          </Overview>\r\n          <Description>{infoData?.description}</Description>\r\n          <Overview>\r\n            <OverviewItem>\r\n              <span>Total Suply:</span>\r\n              <span>{tickersData?.total_supply}</span>\r\n            </OverviewItem>\r\n            <OverviewItem>\r\n              <span>Max Supply:</span>\r\n              <span>{tickersData?.max_supply}</span>\r\n            </OverviewItem>\r\n          </Overview>\r\n          <Tabs>\r\n            <Tab isActive={chartMatch !== null}>\r\n              <Link to={`/${coinId}/chart`}>Chart</Link>\r\n            </Tab>\r\n            <Tab isActive={priceMatch !== null}>\r\n              <Link to={`/${coinId}/price`}>Price</Link>\r\n            </Tab>\r\n          </Tabs>\r\n\r\n          <Outlet context={{ coinId: coinId }} />\r\n        </>\r\n      )}\r\n    </Container>\r\n  );\r\n}\r\nexport default Coin;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}